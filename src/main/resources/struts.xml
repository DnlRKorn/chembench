<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
    <constant name="struts.enable.DynamicMethodInvocation" value="false" />
    <constant name="struts.devMode" value="false" />

    <!-- no files over 8 GB allowed; defaults to 2MB if unset -->
    <constant name="struts.multipart.maxSize" value="8589934592" />

    <package name="default" namespace="/" extends="json-default">

        <default-action-ref name="home" />

        <global-results>
            <result name="login">/jsp/main/notLoggedIn.jsp</result>
        </global-results>

        <!-- Main pages -->
        <action name="login" class="edu.unc.ceccr.chembench.actions.HomeAction" method="execute">
            <result name="success">/jsp/main/home.jsp</result>
        </action>

        <action name="logout" class="edu.unc.ceccr.chembench.actions.HomeAction" method="logout">
            <result name="success">/jsp/main/home.jsp</result>
        </action>

        <action name="home" class="edu.unc.ceccr.chembench.actions.HomeAction" method="loadPage">
            <result name="success">/jsp/main/home.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="error">
            <result>/jsp/main/error.jsp</result>
        </action>

        <!-- User Registration and Edit Profile Pages -->
        <action name="loadRegistrationPage" class="edu.unc.ceccr.chembench.actions.UserRegistrationAndProfileActions"
                method="loadUserRegistration">
            <result>/jsp/administration/user/registrationForm.jsp</result>
        </action>

        <action name="registerUser" class="edu.unc.ceccr.chembench.actions.UserRegistrationAndProfileActions"
                method="registerUser">
            <result name="success">/jsp/administration/user/registrationApprovalMessage.jsp</result>
            <result name="error">/jsp/administration/user/registrationForm.jsp</result>
        </action>

        <action name="editProfile" class="edu.unc.ceccr.chembench.actions.UserRegistrationAndProfileActions"
                method="loadEditProfilePage">
            <result name="success">/jsp/administration/user/editProfile.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="changePassword" class="edu.unc.ceccr.chembench.actions.UserRegistrationAndProfileActions"
                method="changePassword">
            <result name="success">/jsp/administration/user/editProfile.jsp</result>
            <result name="error">/jsp/administration/user/editProfile.jsp</result>
        </action>

        <action name="updateUserInfo" class="edu.unc.ceccr.chembench.actions.UserRegistrationAndProfileActions"
                method="updateUserInformation">
            <result name="success">/jsp/administration/user/editProfile.jsp</result>
            <result name="error">/jsp/administration/user/editProfile.jsp</result>
        </action>

        <action name="updateUserOptions" class="edu.unc.ceccr.chembench.actions.UserRegistrationAndProfileActions"
                method="updateUserOptions">
            <result name="success">/jsp/administration/user/editProfile.jsp</result>
            <result name="error">/jsp/administration/user/editProfile.jsp</result>
        </action>

        <action name="forgotPassword">
            <result>/jsp/administration/user/resetPassword.jsp</result>
        </action>

        <action name="resetPassword" class="edu.unc.ceccr.chembench.actions.ResetPasswordAction" method="execute">
            <result name="success">/jsp/administration/user/resetPasswordSent.jsp</result>
            <result name="error">/jsp/administration/user/resetPassword.jsp</result>
        </action>

        <!-- Dataset Page -->
        <action name="dataset" class="edu.unc.ceccr.chembench.actions.DatasetFormActions" method="loadPage">
            <result name="success">/jsp/dataset/dataset.jsp</result>
        </action>

        <action name="submitDataset" class="edu.unc.ceccr.chembench.actions.DatasetFormActions" method="execute">
            <result name="input" type="redirect">jobs</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="generateModi" class="edu.unc.ceccr.chembench.actions.DatasetFormActions" method="generateModi">
            <result name="success" type="json">
                <param name="root">modi</param>
            </result>
            <result name="badrequest" type="httpheader">
                <param name="error">400</param>
            </result>
        </action>
        <!-- End Dataset Page -->

        <!-- Modeling Page -->
        <action name="modeling" class="edu.unc.ceccr.chembench.actions.ModelingFormActions" method="loadPage">
            <result>/jsp/modeling/modeling.jsp</result>
        </action>

        <action name="createModelingJob" class="edu.unc.ceccr.chembench.actions.ModelingFormActions" method="execute">
            <result name="success" type="redirect">jobs</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>
        <!-- End Modeling Page -->

        <!-- Make Predictions Pages -->
        <action name="prediction" class="edu.unc.ceccr.chembench.actions.PredictionFormActions"
                method="loadSelectPredictorPage">
            <result name="success">/jsp/prediction/selectPredictor.jsp</result>
            <result name="error">/jsp/prediction/selectPredictor.jsp</result>
            <!--<result name="error">/jsp/main/error.jsp</result> -->
        </action>

        <action name="selectPredictor" class="edu.unc.ceccr.chembench.actions.PredictionFormActions"
                method="loadMakePredictionsPage">
            <result name="success">/jsp/prediction/makePredictions.jsp</result>
            <result name="error">/jsp/prediction/selectPredictor.jsp</result>
            <!--<result name="error">/jsp/main/error.jsp</result> -->
        </action>

        <action name="makeDatasetPrediction" class="edu.unc.ceccr.chembench.actions.PredictionFormActions"
                method="makeDatasetPrediction">
            <result name="success" type="redirect">jobs</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="makeSmilesPrediction" class="edu.unc.ceccr.chembench.actions.PredictionFormActions"
                method="makeSmilesPrediction">
            <result>//jsp/prediction/predictionResults.jsp</result>
        </action>
        <!-- End Make Predictions Pages -->

        <!-- Jobs Page -->
        <action name="jobs" class="edu.unc.ceccr.chembench.actions.JobsActions" method="loadPage">
            <result>/jsp/jobs/jobs.jsp</result>
        </action>
        <!-- End Jobs Page -->

        <!-- View Dataset Page -->
        <action name="viewDataset" class="edu.unc.ceccr.chembench.actions.ViewDataset" method="load">
            <result name="success">/jsp/dataset/viewDataset.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="viewDatasetFold" class="edu.unc.ceccr.chembench.actions.ViewDataset" method="getFold">
            <result name="success" type="json">
                <param name="root">foldCompounds</param>
            </result>
            <result name="badrequest" type="httpheader">
                <param name="error">400</param>
            </result>
        </action>

        <action name="updateDataset" class="edu.unc.ceccr.chembench.actions.ViewDataset" method="updateDataset">
            <result name="success">/jsp/dataset/viewDataset.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>
        <!-- End View Dataset Page -->

        <!-- View Predictor Page -->
        <!-- common to all modeling methods -->
        <action name="viewPredictor" class="edu.unc.ceccr.chembench.actions.ViewPredictor.PredictorPage" method="load">
            <result name="success">/jsp/modeling/viewModel.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="updatePredictor" class="edu.unc.ceccr.chembench.actions.ViewPredictor.PredictorPage"
                method="update">
            <result name="success">/jsp/modelingOutput/viewPredictor.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="viewPredictorExternalValidationSection"
                class="edu.unc.ceccr.chembench.actions.ViewPredictor.ExternalValidationPage" method="load">
            <result name="success">/jsp/modelingOutput/viewPredictor-externalSetPredictions.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="viewPredictorParametersSection"
                class="edu.unc.ceccr.chembench.actions.ViewPredictor.ParametersPage"
                method="load">
            <result name="success">/jsp/modelingOutput/viewPredictor-parameters.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <!-- end common to all modeling methods -->

        <!-- knn -->

        <action name="viewPredictorKnnModelsSection" class="edu.unc.ceccr.chembench.actions.ViewPredictor.KnnModelsPage"
                method="load">
            <result name="success">/jsp/modelingOutput/viewPredictor-knnModels.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <!-- end knn -->

        <!-- knn+ -->

        <action name="viewPredictorKnnPlusModelsSection"
                class="edu.unc.ceccr.chembench.actions.ViewPredictor.KnnPlusModelsPage"
                method="load">
            <result name="success">/jsp/modelingOutput/viewPredictor-knnPlusModels.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <!-- end knn+ -->

        <!-- random forest -->

        <!-- View Groves: not implemented yet
             <actions name="viewPredictorRandomForestGrovesSection" class="edu.unc.ceccr.chembench.actionss.ViewPredictor.ViewPredictorAction" method="loadGrovesPage">
                <result>/jsp/modelingOutput/viewPredictor-randomForestGroves.jsp</result>
            </actions>
            -->

        <action name="viewPredictorRandomForestTreesSection"
                class="edu.unc.ceccr.chembench.actions.ViewPredictor.RandomForestModelsPage" method="load">
            <result name="success">/jsp/modelingOutput/viewPredictor-randomForestTrees.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <!-- end random forest -->

        <!-- svm -->

        <action name="viewPredictorSvmModelsSection" class="edu.unc.ceccr.chembench.actions.ViewPredictor.SvmModelsPage"
                method="load">
            <result name="success">/jsp/modelingOutput/viewPredictor-svmModels.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <!-- end svm -->

        <!-- End View Predictor Page -->

        <!-- View Prediction Page -->
        <action name="viewPrediction" class="edu.unc.ceccr.chembench.actions.ViewPredictionAction" method="load">
            <result name="success">/jsp/predictionOutput/viewPrediction.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="viewPredictionPredictionsSection" class="edu.unc.ceccr.chembench.actions.ViewPredictionAction"
                method="loadPredictionsSection">
            <result name="success">/jsp/predictionOutput/viewPrediction-predictions.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="viewPredictionWarningsSection" class="edu.unc.ceccr.chembench.actions.ViewPredictionAction"
                method="loadWarningsSection">
            <result name="success">/jsp/predictionOutput/viewPrediction-warnings.jsp</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>
        <!-- End View Prediction Page -->

        <!-- Servlet forwards -->
        <!-- these will forward to a path defined in web.xml -->
        <action name="imageServlet">
            <result>imageServlet.do</result>
        </action>

        <action name="fileServlet">
            <result>fileServlet.do</result>
        </action>

        <action name="descriptorMatrixServlet">
            <result>descriptorMatrixServlet.do</result>
        </action>

        <action name="compound3D">
            <result>compound3D.do</result>
        </action>

        <action name="datasetFilesServlet">
            <result>datasetFilesServlet.do</result>
        </action>

        <action name="projectFilesServlet">
            <result>projectFilesServlet.do</result>
        </action>

        <!-- End Servlet forwards -->

        <!-- Delete Actions -->
        <action name="deleteDataset" class="edu.unc.ceccr.chembench.actions.DeleteAction" method="deleteDataset">
            <result name="success" type="redirect">jobs</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="deletePredictor" class="edu.unc.ceccr.chembench.actions.DeleteAction" method="deletePredictor">
            <result name="success" type="redirect">jobs</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="deletePrediction" class="edu.unc.ceccr.chembench.actions.DeleteAction" method="deletePrediction">
            <result name="success" type="redirect">jobs</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="deleteJob" class="edu.unc.ceccr.chembench.actions.DeleteAction" method="deleteJob">
            <result type="redirect">jobs</result>
        </action>

        <action name="deleteUser" class="edu.unc.ceccr.chembench.actions.DeleteAction" method="deleteUser">
            <result name="success" type="redirect">admin</result>
            <result name="error" type="redirect">home</result>
        </action>
        <!-- End Delete Actions -->

        <!-- Admin Actions -->
        <action name="admin" class="edu.unc.ceccr.chembench.actions.AdminAction" method="loadPage">
            <result name="success">/jsp/administration/settings/admin.jsp</result>
            <result name="error">/jsp/main/home.jsp</result>
        </action>

        <action name="adminJobs" class="edu.unc.ceccr.chembench.actions.JobsActions" method="loadPage">
            <result>/jsp/administration/settings/jobs.jsp</result>
            <result name="error">/jsp/main/home.jsp</result>
        </action>

        <action name="emailToAll" class="edu.unc.ceccr.chembench.actions.AdminAction" method="loadEmailAllUsersPage">
            <result>/jsp/administration/settings/emailToAll.jsp</result>
        </action>

        <action name="emailAllUsers" class="edu.unc.ceccr.chembench.actions.AdminAction" method="emailAllUsers">
            <result name="success" type="redirect">admin</result>
            <result name="error">/jsp/main/home.jsp</result>
        </action>

        <action name="emailSelectedUsers" class="edu.unc.ceccr.chembench.actions.AdminAction"
                method="emailSelectedUsers">
            <result name="success" type="redirect">admin</result>
            <result name="error">/jsp/main/home.jsp</result>
        </action>

        <action name="changeUserAdminStatus" class="edu.unc.ceccr.chembench.actions.AdminAction"
                method="changeUserAdminStatus">
            <result name="success" type="redirect">admin</result>
            <result name="error">/jsp/main/home.jsp</result>
        </action>

        <action name="changeUserDescriptorDownloadStatus" class="edu.unc.ceccr.chembench.actions.AdminAction"
                method="changeUserDescriptorDownloadStatus">
            <result name="success" type="redirect">admin</result>
            <result name="error">/jsp/main/home.jsp</result>
        </action>

        <action name="makePredictorPublicAction" class="edu.unc.ceccr.chembench.actions.AdminAction"
                method="makePredictorPublic">
            <result name="success" type="redirect">admin</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="makeDatasetPublicAction" class="edu.unc.ceccr.chembench.actions.AdminAction"
                method="makeDatasetPublic">
            <result name="success" type="redirect">admin</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="renamePublicPredictorAction" class="edu.unc.ceccr.chembench.actions.AdminAction"
                method="renamePublicPredictor">
            <result name="success" type="redirect">admin</result>
            <result name="error">/jsp/main/errors.jsp</result>
        </action>

        <action name="deleteDatasetAction" class="edu.unc.ceccr.chembench.actions.AdminAction" method="deleteDataset">
            <result name="success" type="redirect">admin</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="deletePredictorAction" class="edu.unc.ceccr.chembench.actions.AdminAction"
                method="deletePredictor">
            <result name="success" type="redirect">admin</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <action name="deletePublicPredictionAction" class="edu.unc.ceccr.chembench.actions.AdminAction"
                method="deletePublicPrediction">
            <result name="success" type="redirect">home</result>
            <result name="error">/jsp/main/error.jsp</result>
        </action>

        <!-- End Admin Actions -->

        <!-- API endpoints -->
        <action name="ajaxGetDataset" class="edu.unc.ceccr.chembench.actions.api.AjaxDatasetAction"
                method="ajaxGetDataset">
            <result name="success" type="json">
                <param name="root">dataset</param>
                <param name="excludeNullProperties">true</param>
            </result>
            <result name="notfound" type="httpheader">
                <param name="error">404</param>
            </result>
        </action>
        <!-- End API -->

        <!-- Help forwards -->
        <action name="help-overview">
            <result>/jsp/help/overview.jsp</result>
        </action>

        <action name="help-dataset">
            <result>/jsp/help/datasetpage.jsp</result>
        </action>

        <action name="help-modeling">
            <result>/jsp/help/modelingpage.jsp</result>
        </action>

        <action name="help-prediction">
            <result>/jsp/help/predictionpage.jsp</result>
        </action>

        <action name="help-mybench">
            <result>/jsp/help/mybenchpage.jsp</result>
        </action>

        <action name="help-knn">
            <result>/jsp/help/knnparams.jsp</result>
        </action>

        <action name="help-faq">
            <result>/jsp/help/faq.jsp</result>
        </action>

        <action name="help-fileformats">
            <result>/jsp/help/fileformats.jsp</result>
        </action>

        <action name="help-workflows">
            <result>/jsp/help/workflows.jsp</result>
        </action>

        <action name="help-versions">
            <result>/jsp/help/versions.jsp</result>
        </action>
        <!-- End Help forwards -->
    </package>
</struts>
