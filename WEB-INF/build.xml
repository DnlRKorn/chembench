<?xml version="1.0" ?>
<project default="main">
    <target name="main" depends="deploy-war"/>

    <property name="home.directory" value="CHEMBENCH/prod/deploy"/>
    <property name="tomcat.directory" value="usr/share/tomcat6"/>
    <property name="build.dir" value="classes/edu"/>

    <target name="package-war" depends="compile">
        <copy toDir="ROOT/WEB-INF/classes">
            <fileset dir="ROOT/WEB-INF/src">
                <include name="*.properties"/>
                <include name="*.xml"/>
            </fileset>
        </copy>
        <war destfile="ROOT.war" basedir="ROOT" webxml="ROOT/WEB-INF/web.xml"
             defaultexcludes="yes"
             includes="WEB-INF/**/*, **/*.x, **/*.sdf, **/*.act
                                        , theme/**/*, documentation/*, **/*.jsp 
                                        , **/*.js,*.txt">
        </war>
    </target>

    <target name="deploy-war" depends="package-war">
        <copy file="ROOT.war" toDir="${tomcat.directory}/webapps"/>
    </target>

    <target name="compile">
        <javac srcdir="src" destdir="./classes" fork="yes"
               executable="/usr/bin/javac" debug="true">
            <classpath>
                <fileset dir="./lib">
                    <include name="**/*.jar"/>
                </fileset>
            </classpath>
            <compilerarg value="-Xlint"/>
        </javac>

        <copy toDir="./classes">
            <fileset dir="./">
                <include name="struts.xml"/>
                <!-- needed for struts2 to work -->
            </fileset>
        </copy>
    </target>

    <target name="clean">
        <delete dir="${build.dir}"/>
    </target>

    <target name="clean-build" depends="clean,compile"/>

</project>


    
