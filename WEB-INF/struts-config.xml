<?xml version="1.0"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN" "http://struts.apache.org/dtds/struts-config_1_2.dtd">
<struts-config>
	<data-sources></data-sources>
	<form-beans>
		<form-bean name="viewOutputForm"
			type="edu.unc.ceccr.formbean.ViewOutputFormBean">
		</form-bean>
		<form-bean name="loginForm"
			type="edu.unc.ceccr.formbean.LoginFormBean">
		</form-bean>
		<form-bean name="UserInfoForm"
		     type="edu.unc.ceccr.formbean.UserInfoFormBean">
		 </form-bean>    
		 <form-bean name="SoftwareExpirationForm"
		      type="edu.unc.ceccr.formbean.SoftwareExpirationForm">
		 </form-bean>  
		 <form-bean name="EmailToAllBean"
		      type="edu.unc.ceccr.formbean.EmailToAllBean">
		 </form-bean> 
	</form-beans>
	
	<global-exceptions></global-exceptions>
	<!-- ========== Global Forwards =============================== -->
	<global-forwards>
		<forward name="welcome" path="/checkSession.do" />
	    <forward name="login" path="/jsp/main/home.jsp" /> 
		<forward name="failure" path="/jsp/main/error.jsp" />
	</global-forwards>
	
	<!-- ============== Action Mapping Definitions =========================== -->
	<action-mappings>
	
		<action path="/login" forward="/checkSession.do" />
		               
		<action path="/librarydesign" type="edu.unc.ceccr.action.LibraryAction">
		<forward name="login" path="/jsp/main/home.jsp"/>
		</action>
		
		<action path="/manageFile" type="edu.unc.ceccr.action.DatasetForwardAction" scope="session">
		 <forward name="success" path="/jsp/dataSet/manageFile.jsp" />
		 <forward name="failure" path="/jsp/main/error.jsp" />
		</action>
		
        <action path="/home" forward="/jsp/main/home.jsp" />	
		
		<action path="/externalValidationChart" forward="/chart?doGet" />
		
		<action path="/viewModels"
			type="edu.unc.ceccr.action.ViewPreviouslyGeneratedModels"
			input="/jsp/modeling/modeling.jsp" name="qsarForm" scope="request">
			<forward name="success" path="/jsp/modeling/viewPreviouslyGeneratedModels.jsp" />
			<forward name="failure" path="/jsp/main/error.jsp" />
		</action>
		
		<action path="/submitLogin"
			type="edu.unc.ceccr.action.LoginAction" input="/jsp/main/home.jsp"
			name="loginForm" scope="request">
			<forward name="success" path="/jsp/main/home.jsp" />
			<forward name="failure" path="/jsp/administration/user/lostPasswordRetrieval.jsp"/>
		</action>
		
		<action path="/anonPredict"
			name="predForm" scope="request" type="edu.unc.ceccr.action.AnonymousPredictForward" input="/jsp/main/home.jsp">
			<forward name="success" path="/jsp/anonymous/predict.jsp" />
			<forward name="failure" path="/jsp/main/home.jsp"/>
		</action>
		
		<action path="/deleteUser" type="edu.unc.ceccr.action.RegisterActions.DeleteUserAction" scope="request">
		<forward name="success" path="/viewUsers.do"/>
		<forward name="failure" path="/jsp/main/error.jsp" />
		</action>
		
		<action path="/checkNewUser" 
		type="edu.unc.ceccr.action.RegisterActions.CheckNewUserAction" name="UserInfoForm"
		scope="session">
	    <forward name="success" path="/jsp/administration/settings/pendingNewUserApprovals.jsp"/>
	    <forward name="failure" path="/jsp/main/error.jsp" />
		</action>
		
		<action path="/help" forward="/jsp/main/helpPage.jsp" />
		 
		 <action path="/forUser"
			type="edu.unc.ceccr.action.CheckSessionAction">
			<forward name="login" path="/jsp/main/home.jsp" />
			<forward name="loggedin" path="/jsp/administration/settings/userAccountSettings.jsp" />
		</action>		
		 
		<action path="/gotoregister" forward="/jsp/administration/user/registrationForm.jsp" />
		<action path="/notReady" forward="/jsp/main/underConstruction.jsp"/>
		
		<action path="/updateSoftwareDate" type="edu.unc.ceccr.action.RegisterActions.UpdateSoftwareAction"
		input ="/jsp/administration/settings/systemSettings.jsp"  name="SoftwareExpirationForm" scope="request">
		<forward name="success" path="/admin.do"/>
		<forward name="failure" path="/jsp/main/error.jsp"/>
		</action>
		<action path="/getSoftwareDates" type="edu.unc.ceccr.action.RegisterActions.UpdateSoftwareAction" scope="request">
		<forward name="success" path="/admin.do"/>
		<forward name="failure" path="/jsp/main/error.jsp"/>
		</action>
		
		<action path="/register" type="edu.unc.ceccr.action.RegisterActions.RegisterAction"
		input="/jsp/register.jsp" name="UserInfoForm" scope="session">
		<forward name="success" path="/jsp/administration/user/registrationApprovalMessage.jsp"/>
		<forward name="back" path="/jsp/administration/user/registrationForm.jsp"/>
		<forward name="failure" path="/jsp/administration/user/registrationError.jsp"/>
		</action>
		
		<action path="/agree" type="edu.unc.ceccr.action.RegisterActions.AgreeAction" scope="request">
		<forward name="success" path="/checkNewUser.do"/>
		<forward name="failure" path="/jsp/main/error.jsp"/>
		</action>
		
		<action path="/deny" type="edu.unc.ceccr.action.RegisterActions.DenyAction" scope="request">
		<forward name="success" path="/checkNewUser.do"/>
		<forward name="failure" path="/jsp/main/error.jsp"/>
		</action>
		
		<action path="/permission" type="edu.unc.ceccr.action.RegisterActions.QueuedJobPermissionAction" scope="request">
		<forward name="success" path="/admin.do" />
		<forward name="failure" path="/jsp/main/error.jsp"/>
		</action>
		
		<action path="/admin" type="edu.unc.ceccr.action.RegisterActions.Administration" scope="request">
		<forward name="admin" path="/jsp/administration/settings/systemSettings.jsp"/>
		<forward name="failure" path="/jsp/main/error.jsp"/>
		</action>
		
		<action path="/updateAdminSettings" type="edu.unc.ceccr.action.RegisterActions.UpdateAdminSettingsAction" scope="request">
		<forward name="admin" path="/jsp/administration/settings/systemSettings.jsp"/>
		<forward name="failure" path="/jsp/main/error.jsp"/>
		</action>
		
		<action path="/viewUsers" type="edu.unc.ceccr.action.RegisterActions.ViewUsersAction" scope="request">
		<forward name="success" path="/jsp/administration/user/userInformation.jsp" />
		<forward name="failure" path="/jsp/main/error.jsp"/>
		</action>
		
		<action path="/toEmail" forward="/jsp/administration/user/emailToAll.jsp"></action>
		<action path="/getPassword" forward="/jsp/administration/user/lostPasswordRetrieval.jsp"></action>
		<action path="/alterPassword" forward="/jsp/administration/settings/userAccountSettings.jsp"></action>
		
		
		<action path="/emailAll" type="edu.unc.ceccr.action.RegisterActions.EmailAllAction" 
		input="/jsp/administration/user/emailToAll.jsp" name="EmailToAllBean" scope="request">
		<forward name="failure" path="/jsp/main/error.jsp"/>
		</action>
		
		<action path="/retrievePassword" type="edu.unc.ceccr.action.RegisterActions.RetrievePasswordAction" 
		input="/jsp/administration/user/lostPasswordRetrieval.jsp" scope="request">
		<forward name="success" path="/jsp/administration/user/forgetPasswordSent.jsp"/>
		<forward name="failure" path="/jsp/administration/settings/changePasswordMatchError.jsp"/>
		</action>
		
		<action path="/changePassword" type="edu.unc.ceccr.action.RegisterActions.ChangePasswordAction"  
		 input="/jsp/administration/settings/userAccountSettings.jsp" scope="request">
		<forward name="success" path="/jsp/administration/settings/changePasswordSuccess.jsp"/>
		<forward name="NoUser"  path="/jsp/administration/settings/changePasswordMatchError.jsp"/>
		<forward name="failure" path="/jsp/administration/settings/changePasswordMatchError.jsp"/>
		</action>
		
		<action path="/checkSession" type="edu.unc.ceccr.action.CheckSessionAction" scope="request">
		<forward name="loggedin" path="/jsp/administration/user/sessionExpirationNotify.jsp"/>
		<forward name="login" path="/jsp/main/home.jsp" />
		</action>
		
		<action path="/logout" type="edu.unc.ceccr.action.LogoutAction" scope="request">
			<forward name="success" path="/jsp/main/home.jsp" />
		</action>
		<action path="/taskListChange"
			type="edu.unc.ceccr.action.TaskListChangeAction" scope="request">
			<forward name="success" path="/jsp/jobs/taskList.jsp" />
		</action>
		<action path="/viewTaskList"
			type="edu.unc.ceccr.action.ViewTaskListAction" scope="request">
			<forward name="success" path="/jsp/jobs/myJobs.jsp" />
		</action>
	</action-mappings>
	
	<controller
		processorClass="org.apache.struts.tiles.TilesRequestProcessor" />
	<message-resources parameter="MessageResources" />
	<plug-in className="org.apache.struts.tiles.TilesPlugin">
		<set-property property="definitions-config"
			value="/WEB-INF/tiles-defs.xml" />
		<set-property property="moduleAware" value="true" />
	</plug-in>
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
		<set-property property="pathnames"
			value="/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml" />
	</plug-in>
</struts-config>
