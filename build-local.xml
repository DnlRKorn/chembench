<?xml version="1.0" ?>
<project default="main">
	<target name="main" depends="war" />

	<property name="home.directory" value="/public/projects/ceccr"/>
	<property name="tomcat.directory" value="/usr/local/tomcat"/>
	
	<target name="writeDate">
		<propertyfile file="WEB-INF/buildDate.txt">
		     <!--<entry key="CompileDateTimeStr" type="date" value="now" pattern="d MMM yyyy HH:mm:ss"/>-->
	   </propertyfile>
	</target>
	
	<target name="compile" depends="writeDate">
		<mkdir dir="ROOT/WEB-INF/classes" />
		<mkdir dir="ROOT/WEB-INF/src"/> <!-- T A-->
		<javac srcdir="ROOT/WEB-INF/src" destdir="ROOT/WEB-INF/classes" debug="on" debuglevel="lines,vars,source">
			<classpath>

				<fileset dir="ROOT/WEB-INF/lib">
					<include name="**/*.jar" />
				</fileset>

				<fileset dir="${tomcat.directory}/common/lib">
					<include name="**/*.jar" />
				</fileset>

			</classpath>
		</javac>
		
		<copy toDir="WEB-INF/classes">
			<fileset dir="WEB-INF/">
				<include name="struts.xml" /> <!-- needed for struts2 to work -->
			</fileset>
		</copy>
		
	</target>
	
	<target name="war" depends="compile">
		<copy toDir="ROOT/WEB-INF/classes">
			<fileset dir="ROOT/WEB-INF/src">
				<include name="*.properties" />
				<include name="*.xml" />
			</fileset>
		</copy>
		<war destfile="ROOT.war" basedir="" webxml="WEB-INF/web.xml" defaultexcludes="yes" includes="WEB-INF/**/*, theme/**/*, **/*.jsp, **/*.js,*.txt">
		</war>
	</target>

	
<!--
	<taskdef name="hibernatetool"
		classname="org.hibernate.tool.ant.HibernateToolTask"
		classpathref="ROOT/WEB-INF/lib" />

	<target name="reveng.hbmxml"
		description="Produces XML mapping files in src directory">

		<hibernatetool destdir="${basedir}/src">

			<jdbcconfiguration
				propertyfile="${basedir}/ceccr.db.properties"
				revengfile="${basedir}/helloworld.reveng.xml"/>
			
			<hbm2hbxml/> 
			<hbm2cfgxml/> 

		</hibernatetool>
	</target>
-->	
	
	<target name="xslt">
			<xslt style="${ROOT}/xsl/jsfxml.xsl" destdir="${ROOT}/jsp" extension=".jsp" includes="${ROOT}/html/*">
			</xslt>
		</target>

	
</project>
